<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Form builder Exercise</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-LN+7fdVzj6u52u30Kp6M/trliBMCMKTyK833zpbD+pXdCLuTusPj697FH4R/5mcr" crossorigin="anonymous" />
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-ndDqU0Gzau9qJ1lfW4pNLlhNTkCfHzAVBReH9diLvGRem5+R9g2FzA8ZGN954O5Q"
        crossorigin="anonymous"></script>
    <script>
        document.addEventListener("DOMContentLoaded", () => {
            // Check if there's any data in local storage and render the table
            renderTable();

            // Handle form submission
            const form = document.querySelector("form");
            form.addEventListener("submit", handleClick);
        });

        function handleClick(event) {
            event.preventDefault(); // Prevent default form submission

            const inputName = document.getElementById("inputName").value;
            const email = document.getElementById("email").value;
            const contact = document.getElementById("contact").value;
            const accType = document.getElementById("accType").value;

            // Create a customer object
            const customer = {
                name: inputName,
                email: email,
                contact: contact,
                accType: accType,
            };

            // Get existing customers from local storage, or initialize an empty array
            let customers = JSON.parse(localStorage.getItem("customers")) || [];

            // Add the new customer to the array
            customers.push(customer);

            // Save the updated array back to local storage
            localStorage.setItem("customers", JSON.stringify(customers));

            // Clear the form fields
            document.getElementById("inputName").value = "";
            document.getElementById("email").value = "";
            document.getElementById("contact").value = "";
            document.getElementById("accType").value = "";

            // Render the updated table
            renderTable();
        }

        function renderTable() {
            let customers = JSON.parse(localStorage.getItem("customers")) || [];

            // Get the container for the table
            let tableContainer = document.getElementById("tableContainer");
            if (!tableContainer) {
                // Create the table container if it doesn't exist
                tableContainer = document.createElement("div");
                tableContainer.id = "tableContainer";
                tableContainer.className = "container mt-5";
                document.body.appendChild(tableContainer);
            }

            // If there are no customers, clear the table container
            if (customers.length === 0) {
                tableContainer.innerHTML = "";
                return;
            }

            // Build the table HTML
            let tableHTML =`
                <table class="table table-striped">
                    <thead>
                        <tr>
                            <th scope="col">Name</th>
                            <th scope="col">Email ID</th>
                            <th scope="col">Contact No</th>
                            <th scope="col">Account Type</th>
                        </tr>
                    </thead>
                    <tbody>
                        `;

            customers.forEach((customer) => {
                            tableHTML += `
                <tr>
                    <td>${customer.name}</td>
                    <td>${customer.email}</td>
                    <td>${customer.contact}</td>
                    <td>${customer.accType}</td>
                </tr>
                `;
            });

            tableHTML += `
                    </tbody>
                </table>
            `;
            tableContainer.innerHTML = tableHTML;
        }
    </script>
</head>
<body>
    <form class="container" action="handleClick()">
        <div class="row mb-3">
            <label for="inputName" class="col-sm-2 col-form-label">Name: </label>
            <div class="col-sm-10">
                <input type="text" class="form-control" id="inputName" placeholder="Enter Name" required />
            </div>
        </div>
        <div class="row mb-3">
            <label for="email" class="col-sm-2 col-form-label">Email Id: </label>
            <div class="col-sm-10">
                <input type="email" class="form-control" id="email" placeholder="Enter email" required />
            </div>
        </div>
        <div class="row mb-3">
            <label for="contact" class="col-sm-2 col-form-label">Contact No:
            </label>
            <div class="col-sm-10">
                <input type="number" class="form-control" id="contact" placeholder="Enter Contact No" required />
            </div>
        </div>
        <div class="row mb-3">
            <label for="accType" class="col-sm-2 col-form-label">Account Type</label>
            <div class="col-sm-10">
                <select class="form-select" name="accType" id="accType" required>
                    <option value="" disabled selected>Select Account Type</option>
                    <option value="Savings">Savings</option>
                    <option value="Current">Current</option>
                    <option value="OD">OD</option>
                </select>
            </div>
        </div>
        <div class="row mb-2">
            <div class="col-sm-2"></div>
            <button class="btn btn-primary col-sm-3">Add Customer</button>
        </div>
    </form>
</body>

</html>